\chapter{Real-Time Embedded and Safety-Critical Systems}
\label{chapter:rts}

\section{Definitions and Background} % (fold)
\label{sec:definitions_and_background}

% section definitions_and_background (end)

\section{Scheduling} % (fold)
\label{sec:scheduling}
In concurrent programs, i.e programs containing multiple threads, it is not necessary to specify the exact ordering of task execution. The scheduler provides the means of sharing system resources with every participating thread in a way such that every thread meets its temporal requirements. For this to work the tasks rarely cannot just run until completion in a sequential manner one at a time. Instead the scheduler generates an internal \textit{schedule} based on the properties of each task that the tasks are interleaved with each other. If the program is correct, the output stays the same across all possible interleaves. Several scheduling algorithms have been proposed including the \textit{Cyclic Executive} (CE) and \textit{Fixed Priority Scheduling} (FPS). Although many other algorithms exists such as \textit{Earliest Deadline First} (EDF) and \textit{Value-Based Scheduling} (VBS), attention will only be given to CE and FPS as these are the ones employed in SCJ.

\subsection{Cyclic Executive}
When the number of tasks is fixed and are only periodic, it is possible\footnote{It is possible but often very hard to create this schedule} to create a schedule by hand such that when the schedule is repeated, every task meets its temporal requirements. Each task is basically split up into fixed sized chunks of so-called procedure calls and represented in the table, which is known as the \textit{major cycle}. Typically the major cycle is split into time slots of a fixed duration, or simply \textit{minor cycles}, in a way such that each slot contains a small number of procedure calls. Clock interrupts happening every x ms ensures that all containing procedures are executed in the scheduled slot before rescheduling to the next. Although the table is often rather difficult to construct, especially with tasks having long periods, the schedule requires no further analysis which is a huge benefit of this approach. On the downside, only period tasks are supported having periods that are multiples of the minor cycle time.

\subsection{Fixed Priority Scheduling}
Fixed Priority Scheduling, or simply FPS, is priority-based scheduling technique in which tasks are assigned priorities that are taking into account when creating the schedule. As opposed to the previous Cyclic Executive scheme, the notion of a task (thread) is preserved in FPS, as tasks are not explicitly split up into procedure calls. Each task is always in one of the following states:

\begin{itemize}
	\item Running
	\item Runnable
	\item Suspended and is waiting for a timing event
	\item Suspended and is waiting for a non-timing event
\end{itemize}

The currently executing task is in a \textit{running} state, but can be \textit{suspended}, by e.g. the release of a higher priority task. In this case, the task waits for a timing event from the scheduler in order to continue. Tasks that are in a \textit{runnable} state, are ready to run, but are not yet scheduled by the scheduler. Finally tasks that are e.g. waiting for some condition can be woken by a non-timing event, e.g. in the case of a producer-consumer pair. 

In many cases it makes sense to interrupt a lower priority task when a task with a higher priority is ready to run - this is called \textit{preemption}. Sometimes, however, the lower priority task is allowed to continue to complete in case of another higher priority task being in a runnable state - this is called \textit{non-preemption}. Often a preemptive approach is preferred over a non-preemptive as there are often reasons associated with assigning some tasks high priority, namely that these tasks should always be preferred to lower priority ones - in a non-preemptive solution this requirement is often violated letting the high priority tasks become less active. As two extreme alternatives, it is possible to delay the preemption of a task for some bounded time or simply just  


 When a low priority task executes and a higher priority task is released,  

% section scheduling (end)

\subsection{Schedulability Analysis} % (fold)
\label{sec:schedulability_analysis}

% section schedulability_analysis (end)

